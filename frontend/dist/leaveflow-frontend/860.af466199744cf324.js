"use strict";(self.webpackChunkleaveflow_frontend=self.webpackChunkleaveflow_frontend||[]).push([[860],{4860:(b,m,s)=>{s.r(m),s.d(m,{LoginComponent:()=>w});var c=s(177),r=s(4341),d=s(6544),e=s(4438),h=s(4320),u=s(3366);function f(o,p){if(1&o&&(e.j41(0,"div",47)(1,"div",34),e.nrm(2,"i",48),e.EFF(3),e.k0s()()),2&o){const a=e.XpG();e.R7$(3),e.SpI(" ",a.errorMessage," ")}}function _(o,p){1&o&&(e.j41(0,"span",49),e.nrm(1,"i",50),e.EFF(2," Sign In "),e.k0s())}function C(o,p){1&o&&(e.j41(0,"span",49),e.nrm(1,"i",51),e.EFF(2," Signing in... "),e.k0s())}let w=(()=>{class o{constructor(a,n,t){this.auditLogger=a,this.apiService=n,this.router=t,this.credentials={email:"",password:""},this.showPassword=!1,this.isLoading=!1,this.errorMessage="",this.componentStartTime=Date.now()}ngOnInit(){this.auditLogger.logComponentLifecycle("LoginComponent","OnInit",{timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,referrer:document.referrer,url:window.location.href}),this.auditLogger.logNavigation(document.referrer||"direct","/login"),this.auditLogger.logUserAction("Page Load","LoginComponent",{loadTime:Date.now()-this.componentStartTime})}ngOnDestroy(){this.auditLogger.logComponentLifecycle("LoginComponent","OnDestroy",{sessionDuration:Date.now()-this.componentStartTime,wasFormSubmitted:this.isLoading})}togglePassword(){this.showPassword=!this.showPassword,this.auditLogger.logUserAction("Toggle Password Visibility","LoginComponent",{passwordVisible:this.showPassword,hasPasswordValue:!!this.credentials.password})}onEmailChange(){this.auditLogger.logFormValidation("login-form","email",this.isValidEmail(this.credentials.email))}onPasswordChange(){this.auditLogger.logFormValidation("login-form","password",!!this.credentials.password)}onSubmit(){this.errorMessage="",this.auditLogger.logFormSubmission("login-form",{email:this.credentials.email,hasPassword:!!this.credentials.password},this.isFormValid()),this.credentials.email&&this.credentials.password?(this.isLoading=!0,this.auditLogger.logUserAction("Login Attempt Started","LoginComponent",{email:this.credentials.email,timestamp:(new Date).toISOString(),browserInfo:{userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled}}),this.apiService.login({email:this.credentials.email,password:this.credentials.password}).subscribe({next:n=>{if(this.isLoading=!1,n.success&&n.data)this.auditLogger.logAuthAttempt(this.credentials.email,!0),this.auditLogger.logUserAction("Login Success","LoginComponent",{redirectTo:"/dashboard",authMethod:"email_password",userId:n.data.user.id,userRole:n.data.user.role}),console.log("\u2705 Login successful:",{user:n.data.user,message:n.data.message,timestamp:(new Date).toISOString()}),this.router.navigate(["/dashboard"]);else{const t=n.message||"Login failed";this.errorMessage=t,this.auditLogger.logAuthAttempt(this.credentials.email,!1,t),this.auditLogger.logUserAction("Login Failed","LoginComponent",{errorMessage:t,apiResponse:!1}),console.error("\u274c Login failed:",{error:t,timestamp:(new Date).toISOString()})}},error:n=>{this.isLoading=!1;const t=n.message||"Unable to connect to server. Please try again.";this.errorMessage=t,this.auditLogger.logAuthAttempt(this.credentials.email,!1,t),this.auditLogger.logUserAction("Login Network Error","LoginComponent",{errorMessage:t,errorType:"network"}),this.auditLogger.logError("AUTH","Login Network Error",n,{email:this.credentials.email,baseUrl:"http://localhost:8080"}),console.error("\u274c Login network error:",{email:this.credentials.email,error:t,fullError:n,timestamp:(new Date).toISOString()})}})):(this.errorMessage="Please fill in all required fields",this.auditLogger.logUserAction("Login Form Validation Failed","LoginComponent",{missingFields:{email:!this.credentials.email,password:!this.credentials.password}}),this.auditLogger.logSimpleError("FORM","Login Form Incomplete",{email:!!this.credentials.email,password:!!this.credentials.password}))}isValidEmail(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}isFormValid(){return!!(this.credentials.email&&this.credentials.password&&this.isValidEmail(this.credentials.email))}onForgotPasswordClick(){this.auditLogger.logUserAction("Forgot Password Clicked","LoginComponent",{hasEmailValue:!!this.credentials.email,timestamp:(new Date).toISOString()})}onSignUpLinkClick(){this.auditLogger.logUserAction("Sign Up Link Clicked","LoginComponent",{fromPage:"/login",toPage:"/register"})}onBackToHomeClick(){this.auditLogger.logUserAction("Back to Home Clicked","LoginComponent",{fromPage:"/login",toPage:"/home"})}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(h.Z),e.rXU(u.G),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-login"]],standalone:!0,features:[e.aNF],decls:70,vars:9,consts:[["loginForm","ngForm"],[1,"min-h-screen","flex","items-center","justify-center","py-12","px-4","relative","overflow-hidden"],[1,"absolute","inset-0","overflow-hidden"],[1,"floating-shapes"],[1,"shape","shape-1"],[1,"shape","shape-2"],[1,"shape","shape-3"],[1,"shape","shape-4"],[1,"max-w-md","w-full","space-y-8","relative","z-10","fade-in-up"],[1,"text-left"],["routerLink","/home",1,"flex","items-center","text-white/80","hover:text-white","transition-all","duration-300","backdrop-blur-sm","bg-white/10","rounded-full","px-4","py-2",3,"click"],[1,"fas","fa-arrow-left","mr-2"],[1,"text-center","fade-in"],[1,"flex","items-center","justify-center","mb-8"],[1,"w-16","h-16","bg-gradient-to-br","from-white/20","to-white/10","backdrop-blur-lg","rounded-2xl","flex","items-center","justify-center","mr-4","shadow-xl","border","border-white/20"],[1,"fas","fa-calendar-alt","text-white","text-2xl"],[1,"text-4xl","font-bold","text-white","tracking-tight"],[1,"text-white/80","text-sm","font-medium"],[1,"card","fade-in-up"],[1,"card-header"],[1,"card-title"],[1,"card-subtitle"],[1,"space-y-6",3,"ngSubmit"],[1,"form-group"],[1,"form-label"],[1,"input-group"],[1,"input-icon","fas","fa-envelope"],["type","email","placeholder","Enter your email address","name","email","required","","email","","autocomplete","email",1,"form-control",3,"ngModelChange","ngModel"],[1,"flex","justify-between","items-center","mb-2"],["type","button",1,"text-primary","text-sm","font-medium","hover:text-primary-dark","transition-colors",3,"click"],[1,"input-icon","fas","fa-lock"],["placeholder","Enter your password","name","password","required","","autocomplete","current-password",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"absolute","right-3","top-1/2","transform","-translate-y-1/2","text-gray-400","hover:text-primary","transition-colors",3,"click"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["type","checkbox",1,"rounded","border-gray-300","text-primary","focus:ring-primary","mr-3"],[1,"text-sm","text-gray-600"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-full","btn-large","group",3,"disabled"],["class","flex items-center justify-center",4,"ngIf"],[1,"text-center","mt-8","pt-6","border-t","border-gray-200"],[1,"text-gray-600"],["routerLink","/register",1,"text-primary","font-semibold","hover:text-primary-dark","transition-colors","ml-1",3,"click"],[1,"text-center","text-sm","text-white/70","fade-in"],[1,"mb-2"],[1,"flex","justify-center","space-x-4"],["href","#",1,"hover:text-white","transition-colors"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg","text-sm"],[1,"fas","fa-exclamation-circle","mr-2"],[1,"flex","items-center","justify-center"],[1,"fas","fa-sign-in-alt","mr-2","group-hover:translate-x-1","transition-transform"],[1,"fas","fa-spinner","fa-spin","mr-2"]],template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.nrm(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),e.k0s()(),e.j41(7,"div",8)(8,"div",9)(9,"button",10),e.bIt("click",function(){return e.eBV(i),e.Njj(t.onBackToHomeClick())}),e.nrm(10,"i",11),e.EFF(11," Back to home "),e.k0s()(),e.j41(12,"div",12)(13,"div",13)(14,"div",14),e.nrm(15,"i",15),e.k0s(),e.j41(16,"div")(17,"h1",16),e.EFF(18,"LeaveFlow"),e.k0s(),e.j41(19,"p",17),e.EFF(20,"Smart Leave Management"),e.k0s()()()(),e.j41(21,"div",18)(22,"div",19)(23,"h2",20),e.EFF(24,"Welcome back"),e.k0s(),e.j41(25,"p",21),e.EFF(26,"Sign in to manage your team's leave requests efficiently"),e.k0s()(),e.j41(27,"form",22,0),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(t.onSubmit())}),e.j41(29,"div",23)(30,"label",24),e.EFF(31,"Email Address"),e.k0s(),e.j41(32,"div",25),e.nrm(33,"i",26),e.j41(34,"input",27),e.mxI("ngModelChange",function(g){return e.eBV(i),e.DH7(t.credentials.email,g)||(t.credentials.email=g),e.Njj(g)}),e.bIt("ngModelChange",function(){return e.eBV(i),e.Njj(t.onEmailChange())}),e.k0s()()(),e.j41(35,"div",23)(36,"div",28)(37,"label",24),e.EFF(38,"Password"),e.k0s(),e.j41(39,"button",29),e.bIt("click",function(){return e.eBV(i),e.Njj(t.onForgotPasswordClick())}),e.EFF(40," Forgot password? "),e.k0s()(),e.j41(41,"div",25),e.nrm(42,"i",30),e.j41(43,"input",31),e.mxI("ngModelChange",function(g){return e.eBV(i),e.DH7(t.credentials.password,g)||(t.credentials.password=g),e.Njj(g)}),e.bIt("ngModelChange",function(){return e.eBV(i),e.Njj(t.onPasswordChange())}),e.k0s(),e.j41(44,"button",32),e.bIt("click",function(){return e.eBV(i),e.Njj(t.togglePassword())}),e.nrm(45,"i"),e.k0s()()(),e.j41(46,"div",33)(47,"label",34),e.nrm(48,"input",35),e.j41(49,"span",36),e.EFF(50,"Remember me"),e.k0s()()(),e.DNE(51,f,4,1,"div",37),e.j41(52,"button",38),e.DNE(53,_,3,0,"span",39)(54,C,3,0,"span",39),e.k0s()(),e.j41(55,"div",40)(56,"p",41),e.EFF(57," Don't have an account? "),e.j41(58,"a",42),e.bIt("click",function(){return e.eBV(i),e.Njj(t.onSignUpLinkClick())}),e.EFF(59," Create one now "),e.k0s()()()(),e.j41(60,"div",43)(61,"p",44),e.EFF(62,"Secure & trusted by teams worldwide"),e.k0s(),e.j41(63,"div",45)(64,"a",46),e.EFF(65,"Privacy Policy"),e.k0s(),e.j41(66,"span"),e.EFF(67,"\u2022"),e.k0s(),e.j41(68,"a",46),e.EFF(69,"Terms of Service"),e.k0s()()()()()}if(2&n){const i=e.sdS(28);e.R7$(34),e.R50("ngModel",t.credentials.email),e.R7$(9),e.Y8G("type",t.showPassword?"text":"password"),e.R50("ngModel",t.credentials.password),e.R7$(2),e.HbH(t.showPassword?"fas fa-eye-slash":"fas fa-eye"),e.R7$(6),e.Y8G("ngIf",t.errorMessage),e.R7$(),e.Y8G("disabled",!i.valid||t.isLoading),e.R7$(),e.Y8G("ngIf",!t.isLoading),e.R7$(),e.Y8G("ngIf",t.isLoading)}},dependencies:[c.MD,c.bT,r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.Dg,r.vS,r.cV,d.iI,d.Wk],styles:[".floating-shapes[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.shape[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:#ffffff1a;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}.shape-1[_ngcontent-%COMP%]{width:300px;height:300px;top:10%;left:-10%;animation-delay:0s}.shape-2[_ngcontent-%COMP%]{width:200px;height:200px;top:60%;right:-5%;animation-delay:2s}.shape-3[_ngcontent-%COMP%]{width:150px;height:150px;top:30%;right:20%;animation-delay:4s}.shape-4[_ngcontent-%COMP%]{width:250px;height:250px;bottom:10%;left:20%;animation-delay:1s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0);opacity:.3}50%{transform:translateY(-20px) rotate(180deg);opacity:.6}}.space-y-6[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1.5rem}.space-y-8[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:2rem}.space-x-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:1rem}.input-group[_ngcontent-%COMP%]{position:relative}.absolute[_ngcontent-%COMP%]{position:absolute}.right-3[_ngcontent-%COMP%]{right:.75rem}.top-1/2[_ngcontent-%COMP%]{top:50%}.transform[_ngcontent-%COMP%]{transform:translateY(-50%)}.-translate-y-1/2[_ngcontent-%COMP%]{transform:translateY(-50%)}.border-t[_ngcontent-%COMP%]{border-top-width:1px}.border-gray-200[_ngcontent-%COMP%]{border-color:var(--gray-200)}.pt-6[_ngcontent-%COMP%]{padding-top:1.5rem}.ml-1[_ngcontent-%COMP%]{margin-left:.25rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.text-white/80[_ngcontent-%COMP%]{color:#fffc}.text-white/70[_ngcontent-%COMP%]{color:#ffffffb3}.bg-white/10[_ngcontent-%COMP%]{background-color:#ffffff1a}.bg-white/20[_ngcontent-%COMP%]{background-color:#fff3}.from-white/20[_ngcontent-%COMP%]{--tw-gradient-from: rgba(255, 255, 255, .2)}.to-white/10[_ngcontent-%COMP%]{--tw-gradient-to: rgba(255, 255, 255, .1)}.border-white/20[_ngcontent-%COMP%]{border-color:#fff3}.fade-in[_ngcontent-%COMP%]{animation-delay:.2s}.fade-in-up[_ngcontent-%COMP%]{animation-delay:.1s}.group[_ngcontent-%COMP%]:hover   .group-hover\\:translate-x-1[_ngcontent-%COMP%]{transform:translate(.25rem)}.tracking-tight[_ngcontent-%COMP%]{letter-spacing:-.025em}.duration-300[_ngcontent-%COMP%]{transition-duration:.3s}@media (max-width: 480px){.shape[_ngcontent-%COMP%]{opacity:.3}.shape-1[_ngcontent-%COMP%]{width:200px;height:200px}.shape-2[_ngcontent-%COMP%]{width:150px;height:150px}.shape-3[_ngcontent-%COMP%]{width:100px;height:100px}.shape-4[_ngcontent-%COMP%]{width:180px;height:180px}}"]})}}return o})()}}]);